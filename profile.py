import decode

# -----------------------------------------------------------------------------
# I wrote this file. As long as you retain this notice you can do whatever you
# want with this stuff. If we meet some day, and you think this stuff is worth
# it, you can buy me a bottle of cider in return.
#
#	Constantin S. Pan <kvapen@gmail.com>
#	2016
# -----------------------------------------------------------------------------

manufacturer_names = {
	1: "GARMIN",
	2: "GARMIN_FR405_ANTFS",
	3: "ZEPHYR",
	4: "DAYTON",
	5: "IDT",
	6: "SRM",
	7: "QUARQ",
	8: "IBIKE",
	9: "SARIS",
	10: "SPARK_HK",
	11: "TANITA",
	12: "ECHOWELL",
	13: "DYNASTREAM_OEM",
	14: "NAUTILUS",
	15: "DYNASTREAM",
	16: "TIMEX",
	17: "METRIGEAR",
	18: "XELIC",
	19: "BEURER",
	20: "CARDIOSPORT",
	21: "A_AND_D",
	22: "HMM",
	23: "SUUNTO",
	24: "THITA_ELEKTRONIK",
	25: "GPULSE",
	26: "CLEAN_MOBILE",
	27: "PEDAL_BRAIN",
	28: "PEAKSWARE",
	29: "SAXONAR",
	30: "LEMOND_FITNESS",
	31: "DEXCOM",
	32: "WAHOO_FITNESS",
	33: "OCTANE_FITNESS",
	34: "ARCHINOETICS",
	35: "THE_HURT_BOX",
	36: "CITIZEN_SYSTEMS",
	37: "MAGELLAN",
	38: "OSYNCE",
	39: "HOLUX",
	40: "CONCEPT2",
	42: "ONE_GIANT_LEAP",
	43: "ACE_SENSOR",
	44: "BRIM_BROTHERS",
	45: "XPLOVA",
	46: "PERCEPTION_DIGITAL",
	47: "BF1SYSTEMS",
	48: "PIONEER",
	49: "SPANTEC",
	50: "METALOGICS",
	51: "4IIIIS",
	52: "SEIKO_EPSON",
	53: "SEIKO_EPSON_OEM",
	54: "IFOR_POWELL",
	55: "MAXWELL_GUIDER",
	56: "STAR_TRAC",
	57: "BREAKAWAY",
	58: "ALATECH_TECHNOLOGY_LTD",
	59: "MIO_TECHNOLOGY_EUROPE",
	60: "ROTOR",
	61: "GEONAUTE",
	62: "ID_BIKE",
	63: "SPECIALIZED",
	64: "WTEK",
	65: "PHYSICAL_ENTERPRISES",
	66: "NORTH_POLE_ENGINEERING",
	67: "BKOOL",
	68: "CATEYE",
	69: "STAGES_CYCLING",
	70: "SIGMASPORT",
	71: "TOMTOM",
	72: "PERIPEDAL",
	73: "WATTBIKE",
	76: "MOXY",
	77: "CICLOSPORT",
	78: "POWERBAHN",
	79: "ACORN_PROJECTS_APS",
	80: "LIFEBEAM",
	81: "BONTRAGER",
	82: "WELLGO",
	83: "SCOSCHE",
	84: "MAGURA",
	85: "WOODWAY",
	86: "ELITE",
	87: "NIELSEN_KELLERMAN",
	88: "DK_CITY",
	89: "TACX",
	90: "DIRECTION_TECHNOLOGY",
	91: "MAGTONIC",
	92: "1PARTCARBON",
	93: "INSIDE_RIDE_TECHNOLOGIES",
	94: "SOUND_OF_MOTION",
	95: "STRYD",
	96: "ICG",
	97: "MI_PULSE",
	98: "BSX_ATHLETICS",
	99: "LOOK",
	100: "CAMPAGNOLO_SRL",
	101: "BODY_BIKE_SMART",
	102: "PRAXISWORKS",
	103: "LIMITS_TECHNOLOGY",
	255: "DEVELOPMENT",
	257: "HEALTHANDLIFE",
	258: "LEZYNE",
	259: "SCRIBE_LABS",
	260: "ZWIFT",
	261: "WATTEAM",
	262: "RECON",
	263: "FAVERO_ELECTRONICS",
	264: "DYNOVELO",
	265: "STRAVA",
	266: "PRECOR",
	267: "BRYTON",
	268: "SRAM",
	269: "NAVMAN",
	5759: "ACTIGRAPHCORP",
}

def manufacturer_name(manufacturer):
	return manufacturer_names.get(manufacturer, "unknown(%d)" % manufacturer)

garmin_product_names = {
	1: "HRM1",
	2: "AXH01",
	3: "AXB01",
	4: "AXB02",
	5: "HRM2SS",
	6: "DSI_ALF02",
	7: "HRM3SS",
	8: "HRM_RUN_SINGLE_BYTE_PRODUCT_ID",
	9: "BSM",
	10: "BCM",
	11: "AXS01",
	12: "HRM_TRI_SINGLE_BYTE_PRODUCT_ID",
	14: "FR225_SINGLE_BYTE_PRODUCT_ID",
	473: "FR301_CHINA",
	474: "FR301_JAPAN",
	475: "FR301_KOREA",
	494: "FR301_TAIWAN",
	717: "FR405",
	782: "FR50",
	987: "FR405_JAPAN",
	988: "FR60",
	1011: "DSI_ALF01",
	1018: "FR310XT",
	1036: "EDGE500",
	1124: "FR110",
	1169: "EDGE800",
	1199: "EDGE500_TAIWAN",
	1213: "EDGE500_JAPAN",
	1253: "CHIRP",
	1274: "FR110_JAPAN",
	1325: "EDGE200",
	1328: "FR910XT",
	1333: "EDGE800_TAIWAN",
	1334: "EDGE800_JAPAN",
	1341: "ALF04",
	1345: "FR610",
	1360: "FR210_JAPAN",
	1380: "VECTOR_SS",
	1381: "VECTOR_CP",
	1386: "EDGE800_CHINA",
	1387: "EDGE500_CHINA",
	1410: "FR610_JAPAN",
	1422: "EDGE500_KOREA",
	1436: "FR70",
	1446: "FR310XT_4T",
	1461: "AMX",
	1482: "FR10",
	1497: "EDGE800_KOREA",
	1499: "SWIM",
	1537: "FR910XT_CHINA",
	1551: "FENIX",
	1555: "EDGE200_TAIWAN",
	1561: "EDGE510",
	1567: "EDGE810",
	1570: "TEMPE",
	1600: "FR910XT_JAPAN",
	1623: "FR620",
	1632: "FR220",
	1664: "FR910XT_KOREA",
	1688: "FR10_JAPAN",
	1721: "EDGE810_JAPAN",
	1735: "VIRB_ELITE",
	1736: "EDGE_TOURING",
	1742: "EDGE510_JAPAN",
	1743: "HRM_TRI",
	1752: "HRM_RUN",
	1765: "FR920XT",
	1821: "EDGE510_ASIA",
	1822: "EDGE810_CHINA",
	1823: "EDGE810_TAIWAN",
	1836: "EDGE1000",
	1837: "VIVO_FIT",
	1853: "VIRB_REMOTE",
	1885: "VIVO_KI",
	1903: "FR15",
	1907: "VIVO_ACTIVE",
	1918: "EDGE510_KOREA",
	1928: "FR620_JAPAN",
	1929: "FR620_CHINA",
	1930: "FR220_JAPAN",
	1931: "FR220_CHINA",
	1936: "APPROACH_S6",
	1956: "VIVO_SMART",
	1967: "FENIX2",
	1988: "EPIX",
	2050: "FENIX3",
	2052: "EDGE1000_TAIWAN",
	2053: "EDGE1000_JAPAN",
	2061: "FR15_JAPAN",
	2067: "EDGE520",
	2070: "EDGE1000_CHINA",
	2072: "FR620_RUSSIA",
	2073: "FR220_RUSSIA",
	2079: "VECTOR_S",
	2100: "EDGE1000_KOREA",
	2130: "FR920XT_TAIWAN",
	2131: "FR920XT_CHINA",
	2132: "FR920XT_JAPAN",
	2134: "VIRBX",
	2135: "VIVO_SMART_APAC",
	2140: "ETREX_TOUCH",
	2147: "EDGE25",
	2150: "VIVO_FIT2",
	2153: "FR225",
	2160: "VIVO_ACTIVE_APAC",
	2161: "VECTOR_2",
	2162: "VECTOR_2S",
	2172: "VIRBXE",
	2173: "FR620_TAIWAN",
	2174: "FR220_TAIWAN",
	2188: "FENIX3_CHINA",
	2189: "FENIX3_TWN",
	2192: "VARIA_HEADLIGHT",
	2193: "VARIA_TAILLIGHT_OLD",
	2219: "FR225_ASIA",
	2225: "VARIA_RADAR_TAILLIGHT",
	2226: "VARIA_RADAR_DISPLAY",
	2238: "EDGE20",
	2262: "D2_BRAVO",
	2276: "VARIA_REMOTE",
	10007: "SDM4",
	10014: "EDGE_REMOTE",
	20119: "TRAINING_CENTER",
	65531: "CONNECTIQ_SIMULATOR",
	65532: "ANDROID_ANTPLUS_PLUGIN",
	65534: "CONNECT",
}

def product_name(manufacturer, product):
	manname = manufacturer_name(manufacturer)
	if manname == "GARMIN":
		return garmin_product_names.get(product, "unknown(%d)" % product)
	else:
		return "unknown(%d)" % product

device_type_names = {
	1: "ANTFS",
	11: "BIKE_POWER",
	12: "ENVIRONMENT_SENSOR_LEGACY",
	15: "MULTI_SPORT_SPEED_DISTANCE",
	16: "CONTROL",
	17: "FITNESS_EQUIPMENT",
	18: "BLOOD_PRESSURE",
	19: "GEOCACHE_NODE",
	20: "LIGHT_ELECTRIC_VEHICLE",
	25: "ENV_SENSOR",
	26: "RACQUET",
	27: "CONTROL_HUB",
	31: "MUSCLE_OXYGEN",
	35: "BIKE_LIGHT_MAIN",
	36: "BIKE_LIGHT_SHARED",
	119: "WEIGHT_SCALE",
	120: "HEART_RATE",
	121: "BIKE_SPEED_CADENCE",
	122: "BIKE_CADENCE",
	123: "BIKE_SPEED",
	124: "STRIDE_SPEED_DISTANCE",
}

def device_type_name(device_type):
	return device_type_names.get(device_type, "unknown(%d)" % device_type)

file_type_names = {
	1: "Device",
	2: "Settings",
	3: "Sport Settings",
	4: "Activity",
	5: "Workout",
	6: "Course",
	7: "Schedule",
	9: "Weight",
	10: "Totals",
	11: "Goals",
	14: "Blood Pressure",
	15: "MonitoringA",
	20: "Activity Summary",
	28: "Daily Monitoring Records",
	32: "MonitoringB",
	34: "Segment",
	35: "Segment List",
}

def file_type_name(file_type):
	return file_type_names.get(file_type, "unknown(%d)" % file_type)

msg_names = {
	0: "FILE_ID",
	1: "CAPABILITIES",
	2: "DEVICE_SETTINGS",
	3: "USER_PROFILE",
	4: "HRM_PROFILE",
	5: "SDM_PROFILE",
	6: "BIKE_PROFILE",
	7: "ZONES_TARGET",
	8: "HR_ZONE",
	9: "POWER_ZONE",
	10: "MET_ZONE",
	12: "SPORT",
	15: "GOAL",
	18: "SESSION",
	19: "LAP",
	20: "RECORD",
	21: "EVENT",
	23: "DEVICE_INFO",
	26: "WORKOUT",
	27: "WORKOUT_STEP",
	28: "SCHEDULE",
	30: "WEIGHT_SCALE",
	31: "COURSE",
	32: "COURSE_POINT",
	33: "TOTALS",
	34: "ACTIVITY",
	35: "SOFTWARE",
	37: "FILE_CAPABILITIES",
	38: "MESG_CAPABILITIES",
	39: "FIELD_CAPABILITIES",
	49: "FILE_CREATOR",
	51: "BLOOD_PRESSURE",
	53: "SPEED_ZONE",
	55: "MONITORING",
	72: "TRAINING_FILE",
	78: "HRV",
	80: "ANT_RX",
	81: "ANT_TX",
	82: "ANT_CHANNEL_ID",
	101: "LENGTH",
	103: "MONITORING_INFO",
	105: "PAD",
	106: "SLAVE_DEVICE",
	131: "CADENCE_ZONE",
	132: "HR",
	142: "SEGMENT_LAP",
	145: "MEMO_GLOB",
	148: "SEGMENT_ID",
	149: "SEGMENT_LEADERBOARD_ENTRY",
	150: "SEGMENT_POINT",
	151: "SEGMENT_FILE",
	160: "GPS_METADATA",
	161: "CAMERA_EVENT",
	162: "TIMESTAMP_CORRELATION",
	164: "GYROSCOPE_DATA",
	165: "ACCELEROMETER_DATA",
	167: "THREE_D_SENSOR_CALIBRATION",
	169: "VIDEO_FRAME",
	174: "OBDII_DATA",
	177: "NMEA_SENTENCE",
	178: "AVIATION_ATTITUDE",
	184: "VIDEO",
	185: "VIDEO_TITLE",
	186: "VIDEO_DESCRIPTION",
	187: "VIDEO_CLIP",
}

msg_field_names = {
	#FILE_ID
	0: {
		3: "SERIAL_NUMBER",
		4: "TIME_CREATED",
		8: "PRODUCT_NAME",
		1: ("MANUFACTURER", manufacturer_name),
		2: "PRODUCT",
		5: "NUMBER",
		0: ("TYPE", file_type_name),
	},
	#CAPABILITIES
	1: {
		0: "LANGUAGES",
		21: "WORKOUTS_SUPPORTED",
		23: "CONNECTIVITY_SUPPORTED",
		1: "SPORTS",
	},
	#DEVICE_SETTINGS
	2: {
		1: "UTC_OFFSET",
		2: "TIME_OFFSET",
		0: "ACTIVE_TIME_ZONE",
		5: "TIME_ZONE_OFFSET",
	},
	#USER_PROFILE
	3: {
		0: "FRIENDLY_NAME",
		254: "MESSAGE_INDEX",
		4: "WEIGHT",
		22: "LOCAL_ID",
		1: "GENDER",
		2: "AGE",
		3: "HEIGHT",
		5: "LANGUAGE",
		6: "ELEV_SETTING",
		7: "WEIGHT_SETTING",
		8: "RESTING_HEART_RATE",
		9: "DEFAULT_MAX_RUNNING_HEART_RATE",
		10: "DEFAULT_MAX_BIKING_HEART_RATE",
		11: "DEFAULT_MAX_HEART_RATE",
		12: "HR_SETTING",
		13: "SPEED_SETTING",
		14: "DIST_SETTING",
		16: "POWER_SETTING",
		17: "ACTIVITY_CLASS",
		18: "POSITION_SETTING",
		21: "TEMPERATURE_SETTING",
		23: "GLOBAL_ID",
		30: "HEIGHT_SETTING",
	},
	#HRM_PROFILE
	4: {
		254: "MESSAGE_INDEX",
		1: "HRM_ANT_ID",
		0: "ENABLED",
		2: "LOG_HRV",
		3: "HRM_ANT_ID_TRANS_TYPE",
	},
	#SDM_PROFILE
	5: {
		3: "ODOMETER",
		254: "MESSAGE_INDEX",
		1: "SDM_ANT_ID",
		2: "SDM_CAL_FACTOR",
		0: "ENABLED",
		4: "SPEED_SOURCE",
		5: "SDM_ANT_ID_TRANS_TYPE",
		7: "ODOMETER_ROLLOVER",
	},
	#BIKE_PROFILE
	6: {
		0: "NAME",
		3: "ODOMETER",
		254: "MESSAGE_INDEX",
		4: "BIKE_SPD_ANT_ID",
		5: "BIKE_CAD_ANT_ID",
		6: "BIKE_SPDCAD_ANT_ID",
		7: "BIKE_POWER_ANT_ID",
		8: "CUSTOM_WHEELSIZE",
		9: "AUTO_WHEELSIZE",
		10: "BIKE_WEIGHT",
		11: "POWER_CAL_FACTOR",
		1: "SPORT",
		2: "SUB_SPORT",
		12: "AUTO_WHEEL_CAL",
		13: "AUTO_POWER_ZERO",
		14: "ID",
		15: "SPD_ENABLED",
		16: "CAD_ENABLED",
		17: "SPDCAD_ENABLED",
		18: "POWER_ENABLED",
		19: "CRANK_LENGTH",
		20: "ENABLED",
		21: "BIKE_SPD_ANT_ID_TRANS_TYPE",
		22: "BIKE_CAD_ANT_ID_TRANS_TYPE",
		23: "BIKE_SPDCAD_ANT_ID_TRANS_TYPE",
		24: "BIKE_POWER_ANT_ID_TRANS_TYPE",
		37: "ODOMETER_ROLLOVER",
		38: "FRONT_GEAR_NUM",
		39: "FRONT_GEAR",
		40: "REAR_GEAR_NUM",
		41: "REAR_GEAR",
		44: "SHIMANO_DI2_ENABLED",
	},
	#ZONES_TARGET
	7: {
		3: "FUNCTIONAL_THRESHOLD_POWER",
		1: "MAX_HEART_RATE",
		2: "THRESHOLD_HEART_RATE",
		5: "HR_CALC_TYPE",
		7: "PWR_CALC_TYPE",
	},
	#HR_ZONE
	8: {
		2: "NAME",
		254: "MESSAGE_INDEX",
		1: "HIGH_BPM",
	},
	#POWER_ZONE
	9: {
		2: "NAME",
		254: "MESSAGE_INDEX",
		1: "HIGH_VALUE",
	},
	#MET_ZONE
	10: {
		254: "MESSAGE_INDEX",
		2: "CALORIES",
		1: "HIGH_BPM",
		3: "FAT_CALORIES",
	},
	#SPORT
	12: {
		3: "NAME",
		0: "SPORT",
		1: "SUB_SPORT",
	},
	#GOAL
	15: {
		2: "START_DATE",
		3: "END_DATE",
		5: "VALUE",
		7: "TARGET_VALUE",
		254: "MESSAGE_INDEX",
		9: "RECURRENCE_VALUE",
		0: "SPORT",
		1: "SUB_SPORT",
		4: "TYPE",
		6: "REPEAT",
		8: "RECURRENCE",
		10: "ENABLED",
	},
	#SESSION
	18: {
		253: ("TIMESTAMP", decode.timestamp),
		2: "START_TIME",
		3: "START_POSITION_LAT",
		4: "START_POSITION_LONG",
		7: "TOTAL_ELAPSED_TIME",
		8: "TOTAL_TIMER_TIME",
		9: "TOTAL_DISTANCE",
		10: "TOTAL_CYCLES",
		29: "NEC_LAT",
		30: "NEC_LONG",
		31: "SWC_LAT",
		32: "SWC_LONG",
		41: "AVG_STROKE_COUNT",
		48: "TOTAL_WORK",
		59: "TOTAL_MOVING_TIME",
		65: "TIME_IN_HR_ZONE",
		66: "TIME_IN_SPEED_ZONE",
		67: "TIME_IN_CADENCE_ZONE",
		68: "TIME_IN_POWER_ZONE",
		69: "AVG_LAP_TIME",
		124: "ENHANCED_AVG_SPEED",
		125: "ENHANCED_MAX_SPEED",
		126: "ENHANCED_AVG_ALTITUDE",
		127: "ENHANCED_MIN_ALTITUDE",
		128: "ENHANCED_MAX_ALTITUDE",
		254: "MESSAGE_INDEX",
		11: "TOTAL_CALORIES",
		13: "TOTAL_FAT_CALORIES",
		14: "AVG_SPEED",
		15: "MAX_SPEED",
		20: "AVG_POWER",
		21: "MAX_POWER",
		22: "TOTAL_ASCENT",
		23: "TOTAL_DESCENT",
		25: "FIRST_LAP_INDEX",
		26: "NUM_LAPS",
		34: "NORMALIZED_POWER",
		35: "TRAINING_STRESS_SCORE",
		36: "INTENSITY_FACTOR",
		37: "LEFT_RIGHT_BALANCE",
		42: "AVG_STROKE_DISTANCE",
		44: "POOL_LENGTH",
		45: "THRESHOLD_POWER",
		47: "NUM_ACTIVE_LENGTHS",
		49: "AVG_ALTITUDE",
		50: "MAX_ALTITUDE",
		52: "AVG_GRADE",
		53: "AVG_POS_GRADE",
		54: "AVG_NEG_GRADE",
		55: "MAX_POS_GRADE",
		56: "MAX_NEG_GRADE",
		60: "AVG_POS_VERTICAL_SPEED",
		61: "AVG_NEG_VERTICAL_SPEED",
		62: "MAX_POS_VERTICAL_SPEED",
		63: "MAX_NEG_VERTICAL_SPEED",
		70: "BEST_LAP_INDEX",
		71: "MIN_ALTITUDE",
		82: "PLAYER_SCORE",
		83: "OPPONENT_SCORE",
		85: "STROKE_COUNT",
		86: "ZONE_COUNT",
		87: "MAX_BALL_SPEED",
		88: "AVG_BALL_SPEED",
		89: "AVG_VERTICAL_OSCILLATION",
		90: "AVG_STANCE_TIME_PERCENT",
		91: "AVG_STANCE_TIME",
		0: "EVENT",
		1: "EVENT_TYPE",
		5: "SPORT",
		6: "SUB_SPORT",
		16: "AVG_HEART_RATE",
		17: "MAX_HEART_RATE",
		18: "AVG_CADENCE",
		19: "MAX_CADENCE",
		24: "TOTAL_TRAINING_EFFECT",
		27: "EVENT_GROUP",
		28: "TRIGGER",
		43: "SWIM_STROKE",
		46: "POOL_LENGTH_UNIT",
		51: "GPS_ACCURACY",
		57: "AVG_TEMPERATURE",
		58: "MAX_TEMPERATURE",
		64: "MIN_HEART_RATE",
		84: "OPPONENT_NAME",
		92: "AVG_FRACTIONAL_CADENCE",
		93: "MAX_FRACTIONAL_CADENCE",
		94: "TOTAL_FRACTIONAL_CYCLES",
		111: "SPORT_INDEX",
	},
	#LAP
	19: {
		253: ("TIMESTAMP", decode.timestamp),
		2: "START_TIME",
		3: "START_POSITION_LAT",
		4: "START_POSITION_LONG",
		5: "END_POSITION_LAT",
		6: "END_POSITION_LONG",
		7: "TOTAL_ELAPSED_TIME",
		8: "TOTAL_TIMER_TIME",
		9: "TOTAL_DISTANCE",
		10: "TOTAL_CYCLES",
		41: "TOTAL_WORK",
		52: "TOTAL_MOVING_TIME",
		57: "TIME_IN_HR_ZONE",
		58: "TIME_IN_SPEED_ZONE",
		59: "TIME_IN_CADENCE_ZONE",
		60: "TIME_IN_POWER_ZONE",
		110: "ENHANCED_AVG_SPEED",
		111: "ENHANCED_MAX_SPEED",
		112: "ENHANCED_AVG_ALTITUDE",
		113: "ENHANCED_MIN_ALTITUDE",
		114: "ENHANCED_MAX_ALTITUDE",
		254: "MESSAGE_INDEX",
		11: "TOTAL_CALORIES",
		12: "TOTAL_FAT_CALORIES",
		13: "AVG_SPEED",
		14: "MAX_SPEED",
		19: "AVG_POWER",
		20: "MAX_POWER",
		21: "TOTAL_ASCENT",
		22: "TOTAL_DESCENT",
		32: "NUM_LENGTHS",
		33: "NORMALIZED_POWER",
		34: "LEFT_RIGHT_BALANCE",
		35: "FIRST_LENGTH_INDEX",
		37: "AVG_STROKE_DISTANCE",
		40: "NUM_ACTIVE_LENGTHS",
		42: "AVG_ALTITUDE",
		43: "MAX_ALTITUDE",
		45: "AVG_GRADE",
		46: "AVG_POS_GRADE",
		47: "AVG_NEG_GRADE",
		48: "MAX_POS_GRADE",
		49: "MAX_NEG_GRADE",
		53: "AVG_POS_VERTICAL_SPEED",
		54: "AVG_NEG_VERTICAL_SPEED",
		55: "MAX_POS_VERTICAL_SPEED",
		56: "MAX_NEG_VERTICAL_SPEED",
		61: "REPETITION_NUM",
		62: "MIN_ALTITUDE",
		71: "WKT_STEP_INDEX",
		74: "OPPONENT_SCORE",
		75: "STROKE_COUNT",
		76: "ZONE_COUNT",
		77: "AVG_VERTICAL_OSCILLATION",
		78: "AVG_STANCE_TIME_PERCENT",
		79: "AVG_STANCE_TIME",
		83: "PLAYER_SCORE",
		84: "AVG_TOTAL_HEMOGLOBIN_CONC",
		85: "MIN_TOTAL_HEMOGLOBIN_CONC",
		86: "MAX_TOTAL_HEMOGLOBIN_CONC",
		87: "AVG_SATURATED_HEMOGLOBIN_PERCENT",
		88: "MIN_SATURATED_HEMOGLOBIN_PERCENT",
		89: "MAX_SATURATED_HEMOGLOBIN_PERCENT",
		0: "EVENT",
		1: "EVENT_TYPE",
		15: "AVG_HEART_RATE",
		16: "MAX_HEART_RATE",
		17: "AVG_CADENCE",
		18: "MAX_CADENCE",
		23: "INTENSITY",
		24: "LAP_TRIGGER",
		25: "SPORT",
		26: "EVENT_GROUP",
		38: "SWIM_STROKE",
		39: "SUB_SPORT",
		44: "GPS_ACCURACY",
		50: "AVG_TEMPERATURE",
		51: "MAX_TEMPERATURE",
		63: "MIN_HEART_RATE",
		80: "AVG_FRACTIONAL_CADENCE",
		81: "MAX_FRACTIONAL_CADENCE",
		82: "TOTAL_FRACTIONAL_CYCLES",
	},
	#RECORD
	20: {
		253: ("TIMESTAMP", decode.timestamp),
		0: "POSITION_LAT",
		1: "POSITION_LONG",
		5: "DISTANCE",
		11: "TIME_FROM_COURSE",
		19: "TOTAL_CYCLES",
		29: "ACCUMULATED_POWER",
		73: "ENHANCED_SPEED",
		78: "ENHANCED_ALTITUDE",
		2: "ALTITUDE",
		6: "SPEED",
		7: "POWER",
		9: "GRADE",
		28: "COMPRESSED_ACCUMULATED_POWER",
		32: "VERTICAL_SPEED",
		33: "CALORIES",
		39: "VERTICAL_OSCILLATION",
		40: "STANCE_TIME_PERCENT",
		41: "STANCE_TIME",
		51: "BALL_SPEED",
		52: "CADENCE256",
		54: "TOTAL_HEMOGLOBIN_CONC",
		55: "TOTAL_HEMOGLOBIN_CONC_MIN",
		56: "TOTAL_HEMOGLOBIN_CONC_MAX",
		57: "SATURATED_HEMOGLOBIN_PERCENT",
		58: "SATURATED_HEMOGLOBIN_PERCENT_MIN",
		59: "SATURATED_HEMOGLOBIN_PERCENT_MAX",
		3: "HEART_RATE",
		4: "CADENCE",
		8: "COMPRESSED_SPEED_DISTANCE",
		10: "RESISTANCE",
		12: "CYCLE_LENGTH",
		13: "TEMPERATURE",
		17: "SPEED_1S",
		18: "CYCLES",
		30: "LEFT_RIGHT_BALANCE",
		31: "GPS_ACCURACY",
		42: "ACTIVITY_TYPE",
		43: "LEFT_TORQUE_EFFECTIVENESS",
		44: "RIGHT_TORQUE_EFFECTIVENESS",
		45: "LEFT_PEDAL_SMOOTHNESS",
		46: "RIGHT_PEDAL_SMOOTHNESS",
		47: "COMBINED_PEDAL_SMOOTHNESS",
		48: "TIME128",
		49: "STROKE_TYPE",
		50: "ZONE",
		53: "FRACTIONAL_CADENCE",
		62: "DEVICE_INDEX",
	},
	#EVENT
	21: {
		253: ("TIMESTAMP", decode.timestamp),
		3: "DATA",
		2: "DATA16",
		7: "SCORE",
		8: "OPPONENT_SCORE",
		0: "EVENT",
		1: "EVENT_TYPE",
		4: "EVENT_GROUP",
		9: "FRONT_GEAR_NUM",
		10: "FRONT_GEAR",
		11: "REAR_GEAR_NUM",
		12: "REAR_GEAR",
	},
	#DEVICE_INFO
	23: {
		253: ("TIMESTAMP", decode.timestamp),
		3: "SERIAL_NUMBER",
		7: "CUM_OPERATING_TIME",
		27: "PRODUCT_NAME",
		2: ("MANUFACTURER", manufacturer_name),
		4: "PRODUCT",
		5: "SOFTWARE_VERSION",
		10: "BATTERY_VOLTAGE",
		21: "ANT_DEVICE_NUMBER",
		0: "DEVICE_INDEX",
		1: "DEVICE_TYPE",
		6: "HARDWARE_VERSION",
		11: "BATTERY_STATUS",
		18: "SENSOR_POSITION",
		19: "DESCRIPTOR",
		20: "ANT_TRANSMISSION_TYPE",
		22: "ANT_NETWORK",
		25: "SOURCE_TYPE",
	},
	#WORKOUT
	26: {
		5: "CAPABILITIES",
		8: "WKT_NAME",
		6: "NUM_VALID_STEPS",
		4: "SPORT",
	},
	#WORKOUT_STEP
	27: {
		0: "WKT_STEP_NAME",
		2: "DURATION_VALUE",
		4: "TARGET_VALUE",
		5: "CUSTOM_TARGET_VALUE_LOW",
		6: "CUSTOM_TARGET_VALUE_HIGH",
		254: "MESSAGE_INDEX",
		1: "DURATION_TYPE",
		3: "TARGET_TYPE",
		7: "INTENSITY",
	},
	#SCHEDULE
	28: {
		2: "SERIAL_NUMBER",
		3: "TIME_CREATED",
		6: "SCHEDULED_TIME",
		0: ("MANUFACTURER", manufacturer_name),
		1: "PRODUCT",
		4: "COMPLETED",
		5: "TYPE",
	},
	#WEIGHT_SCALE
	30: {
		253: ("TIMESTAMP", decode.timestamp),
		0: "WEIGHT",
		1: "PERCENT_FAT",
		2: "PERCENT_HYDRATION",
		3: "VISCERAL_FAT_MASS",
		4: "BONE_MASS",
		5: "MUSCLE_MASS",
		7: "BASAL_MET",
		9: "ACTIVE_MET",
		12: "USER_PROFILE_INDEX",
		8: "PHYSIQUE_RATING",
		10: "METABOLIC_AGE",
		11: "VISCERAL_FAT_RATING",
	},
	#COURSE
	31: {
		5: "NAME",
		6: "CAPABILITIES",
		4: "SPORT",
	},
	#COURSE_POINT
	32: {
		1: ("TIMESTAMP", decode.timestamp),
		2: "POSITION_LAT",
		3: "POSITION_LONG",
		4: "DISTANCE",
		6: "NAME",
		254: "MESSAGE_INDEX",
		5: "TYPE",
		8: "FAVORITE",
	},
	#TOTALS
	33: {
		253: ("TIMESTAMP", decode.timestamp),
		0: "TIMER_TIME",
		1: "DISTANCE",
		2: "CALORIES",
		4: "ELAPSED_TIME",
		6: "ACTIVE_TIME",
		254: "MESSAGE_INDEX",
		5: "SESSIONS",
		3: "SPORT",
	},
	#ACTIVITY
	34: {
		253: ("TIMESTAMP", decode.timestamp),
		0: "TOTAL_TIMER_TIME",
		5: "LOCAL_TIMESTAMP",
		1: "NUM_SESSIONS",
		2: "TYPE",
		3: "EVENT",
		4: "EVENT_TYPE",
		6: "EVENT_GROUP",
	},
	#SOFTWARE
	35: {
		5: "PART_NUMBER",
		254: "MESSAGE_INDEX",
		3: "VERSION",
	},
	#FILE_CAPABILITIES
	37: {
		2: "DIRECTORY",
		4: "MAX_SIZE",
		254: "MESSAGE_INDEX",
		3: "MAX_COUNT",
		0: "TYPE",
		1: "FLAGS",
	},
	#MESG_CAPABILITIES
	38: {
		254: "MESSAGE_INDEX",
		1: "MESG_NUM",
		3: "COUNT",
		0: "FILE",
		2: "COUNT_TYPE",
	},
	#FIELD_CAPABILITIES
	39: {
		254: "MESSAGE_INDEX",
		1: "MESG_NUM",
		3: "COUNT",
		0: "FILE",
		2: "FIELD_NUM",
	},
	#FILE_CREATOR
	49: {
		0: "SOFTWARE_VERSION",
		1: "HARDWARE_VERSION",
	},
	#BLOOD_PRESSURE
	51: {
		253: ("TIMESTAMP", decode.timestamp),
		0: "SYSTOLIC_PRESSURE",
		1: "DIASTOLIC_PRESSURE",
		2: "MEAN_ARTERIAL_PRESSURE",
		3: "MAP_3_SAMPLE_MEAN",
		4: "MAP_MORNING_VALUES",
		5: "MAP_EVENING_VALUES",
		9: "USER_PROFILE_INDEX",
		6: "HEART_RATE",
		7: "HEART_RATE_TYPE",
		8: "STATUS",
	},
	#SPEED_ZONE
	53: {
		1: "NAME",
		254: "MESSAGE_INDEX",
		0: "HIGH_VALUE",
	},
	#MONITORING
	55: {
		253: ("TIMESTAMP", decode.timestamp),
		2: "DISTANCE",
		3: "CYCLES",
		4: "ACTIVE_TIME",
		11: "LOCAL_TIMESTAMP",
		1: "CALORIES",
		8: "DISTANCE_16",
		9: "CYCLES_16",
		10: "ACTIVE_TIME_16",
		0: "DEVICE_INDEX",
		5: "ACTIVITY_TYPE",
		6: "ACTIVITY_SUBTYPE",
	},
	#TRAINING_FILE
	72: {
		253: ("TIMESTAMP", decode.timestamp),
		3: "SERIAL_NUMBER",
		4: "TIME_CREATED",
		1: ("MANUFACTURER", manufacturer_name),
		2: "PRODUCT",
		0: "TYPE",
	},
	#HRV
	78: {
		0: "TIME",
	},
	#ANT_RX
	80: {
		253: ("TIMESTAMP", decode.timestamp),
		4: "DATA",
		0: "FRACTIONAL_TIMESTAMP",
		1: "MESG_ID",
		2: "MESG_DATA",
		3: "CHANNEL_NUMBER",
	},
	#ANT_TX
	81: {
		253: ("TIMESTAMP", decode.timestamp),
		4: "DATA",
		0: "FRACTIONAL_TIMESTAMP",
		1: "MESG_ID",
		2: "MESG_DATA",
		3: "CHANNEL_NUMBER",
	},
	#ANT_CHANNEL_ID
	82: {
	},
	#LENGTH
	101: {
		253: ("TIMESTAMP", decode.timestamp),
		2: "START_TIME",
		3: "TOTAL_ELAPSED_TIME",
		4: "TOTAL_TIMER_TIME",
		254: "MESSAGE_INDEX",
		5: "TOTAL_STROKES",
		6: "AVG_SPEED",
		11: "TOTAL_CALORIES",
		18: "PLAYER_SCORE",
		19: "OPPONENT_SCORE",
		20: "STROKE_COUNT",
		21: "ZONE_COUNT",
		0: "EVENT",
		1: "EVENT_TYPE",
		7: "SWIM_STROKE",
		9: "AVG_SWIMMING_CADENCE",
		10: "EVENT_GROUP",
		12: "LENGTH_TYPE",
	},
	#MONITORING_INFO
	103: {
		253: ("TIMESTAMP", decode.timestamp),
		0: "LOCAL_TIMESTAMP",
	},
	#PAD
	105: {
	},
	#SLAVE_DEVICE
	106: {
		0: ("MANUFACTURER", manufacturer_name),
		1: "PRODUCT",
	},
	#CADENCE_ZONE
	131: {
		1: "NAME",
		254: "MESSAGE_INDEX",
		0: "HIGH_VALUE",
	},
	#HR
	132: {
		253: ("TIMESTAMP", decode.timestamp),
		9: "EVENT_TIMESTAMP",
		0: "FRACTIONAL_TIMESTAMP",
		1: "TIME256",
		6: "FILTERED_BPM",
		10: "EVENT_TIMESTAMP_12",
	},
	#SEGMENT_LAP
	142: {
		253: ("TIMESTAMP", decode.timestamp),
		2: "START_TIME",
		3: "START_POSITION_LAT",
		4: "START_POSITION_LONG",
		5: "END_POSITION_LAT",
		6: "END_POSITION_LONG",
		7: "TOTAL_ELAPSED_TIME",
		8: "TOTAL_TIMER_TIME",
		9: "TOTAL_DISTANCE",
		10: "TOTAL_CYCLES",
		25: "NEC_LAT",
		26: "NEC_LONG",
		27: "SWC_LAT",
		28: "SWC_LONG",
		29: "NAME",
		33: "TOTAL_WORK",
		44: "TOTAL_MOVING_TIME",
		49: "TIME_IN_HR_ZONE",
		50: "TIME_IN_SPEED_ZONE",
		51: "TIME_IN_CADENCE_ZONE",
		52: "TIME_IN_POWER_ZONE",
		56: "ACTIVE_TIME",
		254: "MESSAGE_INDEX",
		11: "TOTAL_CALORIES",
		12: "TOTAL_FAT_CALORIES",
		13: "AVG_SPEED",
		14: "MAX_SPEED",
		19: "AVG_POWER",
		20: "MAX_POWER",
		21: "TOTAL_ASCENT",
		22: "TOTAL_DESCENT",
		30: "NORMALIZED_POWER",
		31: "LEFT_RIGHT_BALANCE",
		34: "AVG_ALTITUDE",
		35: "MAX_ALTITUDE",
		37: "AVG_GRADE",
		38: "AVG_POS_GRADE",
		39: "AVG_NEG_GRADE",
		40: "MAX_POS_GRADE",
		41: "MAX_NEG_GRADE",
		45: "AVG_POS_VERTICAL_SPEED",
		46: "AVG_NEG_VERTICAL_SPEED",
		47: "MAX_POS_VERTICAL_SPEED",
		48: "MAX_NEG_VERTICAL_SPEED",
		53: "REPETITION_NUM",
		54: "MIN_ALTITUDE",
		57: "WKT_STEP_INDEX",
		69: "FRONT_GEAR_SHIFT_COUNT",
		70: "REAR_GEAR_SHIFT_COUNT",
		0: "EVENT",
		1: "EVENT_TYPE",
		15: "AVG_HEART_RATE",
		16: "MAX_HEART_RATE",
		17: "AVG_CADENCE",
		18: "MAX_CADENCE",
		23: "SPORT",
		24: "EVENT_GROUP",
		32: "SUB_SPORT",
		36: "GPS_ACCURACY",
		42: "AVG_TEMPERATURE",
		43: "MAX_TEMPERATURE",
		55: "MIN_HEART_RATE",
		58: "SPORT_EVENT",
		59: "AVG_LEFT_TORQUE_EFFECTIVENESS",
		60: "AVG_RIGHT_TORQUE_EFFECTIVENESS",
		61: "AVG_LEFT_PEDAL_SMOOTHNESS",
		62: "AVG_RIGHT_PEDAL_SMOOTHNESS",
		63: "AVG_COMBINED_PEDAL_SMOOTHNESS",
		64: "STATUS",
		65: "UUID",
		66: "AVG_FRACTIONAL_CADENCE",
		67: "MAX_FRACTIONAL_CADENCE",
		68: "TOTAL_FRACTIONAL_CYCLES",
	},
	#MEMO_GLOB
	145: {
	},
	#SEGMENT_ID
	148: {
		4: "USER_PROFILE_PRIMARY_KEY",
		5: "DEVICE_ID",
		0: "NAME",
		1: "UUID",
		2: "SPORT",
		3: "ENABLED",
		6: "DEFAULT_RACE_LEADER",
		7: "DELETE_STATUS",
		8: "SELECTION_TYPE",
	},
	#SEGMENT_LEADERBOARD_ENTRY
	149: {
		2: "GROUP_PRIMARY_KEY",
		3: "ACTIVITY_ID",
		4: "SEGMENT_TIME",
		254: "MESSAGE_INDEX",
		0: "NAME",
		1: "TYPE",
	},
	#SEGMENT_POINT
	150: {
		1: "POSITION_LAT",
		2: "POSITION_LONG",
		3: "DISTANCE",
		5: "LEADER_TIME",
		254: "MESSAGE_INDEX",
		4: "ALTITUDE",
	},
	#SEGMENT_FILE
	151: {
		4: "USER_PROFILE_PRIMARY_KEY",
		8: "LEADER_GROUP_PRIMARY_KEY",
		9: "LEADER_ACTIVITY_ID",
		254: "MESSAGE_INDEX",
		1: "FILE_UUID",
		3: "ENABLED",
		7: "LEADER_TYPE",
	},
	#GPS_METADATA
	160: {
	},
	#CAMERA_EVENT
	161: {
	},
	#TIMESTAMP_CORRELATION
	162: {
	},
	#GYROSCOPE_DATA
	164: {
	},
	#ACCELEROMETER_DATA
	165: {
	},
	#THREE_D_SENSOR_CALIBRATION
	167: {
	},
	#VIDEO_FRAME
	169: {
	},
	#OBDII_DATA
	174: {
	},
	#NMEA_SENTENCE
	177: {
		253: ("TIMESTAMP", decode.timestamp),
		0: "TIMESTAMP_MS",
		1: "SENTENCE",
	},
	#AVIATION_ATTITUDE
	178: {
		253: ("TIMESTAMP", decode.timestamp),
		1: "SYSTEM_TIME",
		0: "TIMESTAMP_MS",
		2: "PITCH",
		3: "ROLL",
		4: "ACCEL_LATERAL",
		5: "ACCEL_NORMAL",
		6: "TURN_RATE",
		9: "TRACK",
		10: "VALIDITY",
		7: "STAGE",
		8: "ATTITUDE_STAGE_COMPLETE",
	},
	#VIDEO
	184: {
	},
	#VIDEO_TITLE
	185: {
		1: "TEXT",
		254: "MESSAGE_INDEX",
		0: "MESSAGE_COUNT",
	},
	#VIDEO_DESCRIPTION
	186: {
		254: "MESSAGE_INDEX",
		0: "MESSAGE_COUNT",
		1: "TEXT",
	},
	#VIDEO_CLIP
	187: {
	},
}

base_type_names = {
	0x00: "ENUM",
	0x01: "SINT8",
	0x02: "UINT8",
	0x83: "SINT16",
	0x84: "UINT16",
	0x85: "SINT32",
	0x86: "UINT32",
	0x07: "STRING",
	0x88: "FLOAT32",
	0x89: "FLOAT64",
	0x0A: "UINT8Z",
	0x8B: "UINT16Z",
	0x8C: "UINT32Z",
	0x0D: "BYTE",
}

def file_type_name(file_type):
	return file_type_names.get(file_type, 'unknown')

def base_type_name(base_type):
	return base_type_names.get(base_type, 'unknown')

def msg_name(msg_type):
	return msg_names.get(msg_type, 'unknown(%d)' % msg_type)

def msg_known(msg_type):
	return msg_type in msg_names

def field_known(msg_type, field_num):
	return field_num in msg_field_names.get(msg_type, {})

def field_name(msg_type, field_num):
	field_def = msg_field_names.get(msg_type, {}).get(field_num, 'unknown')
	if type(field_def) is tuple:
		name, decoder = field_def
	else:
		name = field_def
	return name

def field_decode(msg_type, field_num, value):
	field_def = msg_field_names.get(msg_type, {}).get(field_num, 'unknown')
	if type(field_def) is tuple:
		name, decoder = field_def
		return decoder(value)
	else:
		return value
